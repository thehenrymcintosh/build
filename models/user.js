var mongoose=require("mongoose"),bcrypt=require("bcryptjs");mongoose.connect("mongodb://localhost/canary");var db=mongoose.connection,userSchema=mongoose.Schema({username:{type:String,unique:!0},password:{type:String},email:{type:String},name:{type:String}}),User=module.exports=mongoose.model("User",userSchema);module.exports.createUser=function(e,o){var r=require("bcryptjs");r.genSalt(10,function(n,s){r.hash(e.password,s,function(r,n){e.password=n,e.save(o)})})},module.exports.getUserByUsername=function(e,o){var r={username:e};User.findOne(r,o)},module.exports.getUserByEmail=function(e,o){var r={email:e};User.findOne(r,o)},module.exports.comparePassword=function(e,o,r){bcrypt.compare(e,o,function(e,o){if(e)throw e;r(null,o)})},module.exports.getUserByID=function(e,o){User.findById(e,o)};